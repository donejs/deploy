#!/usr/bin/env node

var args = require("command-line-args");
var cli = args([
	{ name: "help", alias: "h", type: Boolean,
	  description: "Print usage instructions" },
]);
var usage = cli.getUsage({
	header: "donejs-deploy - Deploys your production-ready application to a hosting service.",
	footer: "\n  For more information, visit http://donejs.com"
});

// If an argument is specified, but not accepted an error is thrown
// and caught here
var options = {};
try {
	options = cli.parse();
} catch (e) {
	console.error(e.message);
	process.exit(1);
}

if (options.help) { console.log(usage); process.exit(0); }
try {
	if (!options.dir) {
		throw new Error("a destination directory must be specified.");
	}
	require("../lib/package")(options.dir);
} catch (e) {
	console.error("ERROR -- " + e.message);
	process.exit(1);
}

// Usage:
//   donejs-deploy build_directory service [options]
//	 donejs-deploy --dir dist/bundles --service heroku --api-key HFKSF7382

// command line argument checking
